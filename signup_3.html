<!DOCTYPE html>
<html lang="en-US">
<head>

<!-- title and meta -->
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1.0">
<meta name="description" content="Website desc. goes here.">
<title>Zingg Music Lab - Sign Up!</title>

<!--[if IE]>
    <script src="js/html5shiv.js"></script> 
    <style type="text/css">
    .clear {
      zoom: 1;
      display: block;
    }
    </style>
<![endif]-->

<script src="js/jquery-1.11.2.min.js"></script>
<script src="js/jquery.cookie.js"></script>
<script src="js/jquery.storageapi.min.js"></script>
<script src="js/superagent.js"></script>
<!--<script async src="js/smoothscroll.js"></script>-->
<script src="js/parsley-config.js"></script>
<script src="js/parsley.min.js"></script>
<script src="js/ractive.min.js"></script>
<script src="js/delorean.min.js"></script>
<script src="js/dispatcher.js"></script>
<script src="https://js.recurly.com/v3/recurly.js"></script>

<!-- css General -->
<link rel="stylesheet" href="css/base3.css">
<link rel="stylesheet" href="css/style3.css">
<link rel="stylesheet" href="css/parsley.css">
<link rel="stylesheet" href="css/recurly.css">

<!-- js -->
<script>
    $(document).ready(function(){
        $("#nav-mobile").html($("#nav-main").html());
        $("#nav-trigger span").click(function(){
            if ($("nav#nav-mobile ul").hasClass("expanded")) {
                $("nav#nav-mobile ul.expanded").removeClass("expanded").slideUp(250);
                $(this).removeClass("open");
            } else {
                $("nav#nav-mobile ul").addClass("expanded").slideDown(250);
                $(this).addClass("open");
            }
        });
    });
</script>

<script async="" src="js/modernizr.js"></script>
<script async="" src="js/tabs.js"></script>
<script async="" src="js/core.js"></script>

<script>
$(document).ready(function () {

    var activeDiv = 1;
    showDiv(activeDiv);
    var timer = setInterval(changeDiv, 9000);


    function changeDiv() {
        activeDiv++;
        if (activeDiv == 6) {
            activeDiv = 1;
        }
        showDiv(activeDiv);
    }

    function showDiv(num) {
        $('div.display').hide("slow");
        $('#div' + num).fadeToggle("slow");
    }


});

</script>
</head>

<body>
<div id="wrapper">
  <div id="main">
    <!-- Begin Top Bar (Discount Coupon / Buy Ticket)  -->
    <!-- Begin Nav Container -->
    <div class="container">
      <div class="inner_container">
        <div id="nav-trigger">
          <span><img src="img/zingg_logo2.png" width="162" height="31"><br>Menu</span>
        </div>
        <nav id="nav-main">
          <div class="logo">
            <a href="index.html"><img src="img/zingg_logo.png" alt="Zingg Music Lab"></a>
          </div>
          <ul>
            <li><a href="index.html">Home</a></li>
            <li><a href="basic.html">ZML Basic</a></li>
            <li><a href="enterprise.html">ZML Enterprise</a></li>
            <li><a href="music.html">The Music</a></li>
            <li><a href="clients.html">Our Clients</a></li>
            <!-- <li><a href="index.htm" class="home">Home</a></li>-->
            <li class="login"><a href="login.html" style="margin-left:20px;">LOGIN</a></li>
          </ul>
        </nav>
        <nav id="nav-mobile">
          <div class="logo">
            <a href="index.html"><img src="img/zingg_logo.png" alt="Zingg Music Lab"></a>
          </div>
          <ul>
            <li><a href="index.html">Home</a></li>
            <li><a href="basic.html">ZML Basic</a></li>
            <li><a href="enterprise.html">ZML Enterprise</a></li>
            <li><a href="music.html">The Music</a></li>
            <li><a href="clients.html">Our Clients</a></li>
            <!-- <li><a href="index.htm" class="home">Home</a></li>-->
            <li class="login"><a href="login.html" style="margin-left:20px;">LOGIN</a></li>
          </ul>
        </nav>
      </div>
    </div>
    <!-- End Nav Container -->
    <!-- Begin Main Content Container -->
    <div class="block_1_bg" style="padding-bottom: 50px;">
      <div class="top_offset">
        <div class="block_level_content_holder" id="block-1"></div>
      </div>
    </div>
  </div>
  <!-- BEGIN Footer -->
  <div class="footer">
    <div class="block_level_content_holder">
      <div class="footer_block_first">
        <h3>ZML Basic</h3>
        <p><a href="basic.html">Features</a></p>
        <p><a href="easy_setup.html">Easy Setup</a></p>
        <p><a href="music.html">The Music</a></p>
        <p><a href="signup_1.html">Sign Up / Sign In</a></p>
      </div>
      <div class="footer_block">
        <h3>ZML Enterprise</h3>
        <p><a href="enterprise.html">Features</a></p>
        <p><a href="easy_setup.html">Setup / Tech Specs</a></p>
        <p><a href="music.html">The Music</a></p>
        <p><a href="faqs.html">FAQs</a></p>
        <p><a href="contact.html">Contact Sales</a></p>
      </div>
      <div class="footer_block">
        <h3>Contact The Lab</h3>
        <h4>SALES</h4>
        <p><a href="mailto: musicsales@zinggmusiclab.com">musicsales@zinggmusiclab.com</a></p>
        <h4>CUSTOMER SUPPORT</h4>
        <p><a href="mailto:service@zinggmusiclab.com">service@zinggmusiclab.com</a></p>
        <h4>ONLINE</h4>
        <p> <a href="contact.html">Online Contact Form</a></p>
      </div>
    </div>
  </div>
  <!-- END Footer -->
  <!-- BEGIN Copyright Box -->
  <div class="copyright_bg">
    <div class="block_level_content_holder">
      Â© Copyright Zingg Music Lab. All Rights Reserved.
    </div>
  </div>
  <!-- END Copyright Box -->
</div>


<!-- We don't include name attributes for ICC-sensitive data -->
<script id="main-tmpl" type="text/ractive">

<div class="login_padding">
  {{>flash}}
  <div class="signup_fields">
    {{>step3}}
  </div>
</div>

<!-- inline partials -->
<!-- {{>flash}} -->
{{#each stores.flash.store.messages:i}}
  <div id='flash-{{i}}' class='flash flash-{{this.level}}'>{{{html}}}</div>
{{/each}}
<!-- {{/flash}} -->

<!-- {{>step3}} -->
<h2 style="text-align:center; margin-bottom: 15px;">Step 3 - ZML Basic Subscription</h2>
{{#if stores.auth.store.user_data.user && stores.auth.store.user_data.account}}
{{#with stores.auth.store.user_data.account}}
<p>Free trial for 30 days, after which your card will be charged as indicated.<br />
Fill out all fields below and tap the Subscribe button.</p>
<form decorator="subform" id="recurly-subscribe" on-submit="recurlySubmit">
  <input type="hidden" id="billing_info_token" name="billing_info_token" data-recurly="token" />
  <input type="hidden" id="plan_quantity" name="plan_quantity" data-recurly="plan_quantity" value="1">
  <input type="hidden" id="currency" name="currency" data-recurly="currency" value="USD">
  <input type="hidden" id="plan_code" name="plan_code" data-recurly="plan" value="sub1999+30trial">
  <div class="form-title">Coupon Code (if you have one)</div>
  <input class="form-field" type="text" id="coupon" name="coupon" data-recurly="coupon">
  <br />
  <div class="form-title"><span>Subscription Price: </span><span class="price" id="subtotal_next" 
    recurly-data="subtotal_next"></span></div>
  <div class="form-title">Discount: <span class="price" id="discount_next" 
    recurly-data="discount_next"></span></div>
  <div class="form-title">Tax: <span class="price" id="tax_next" 
    recurly-data="tax_next"></span></div>
  <div class="form-title">Total: <span class="price" id="total_next"
    recurly-data="total_next"></span></div>
  <div class="form-title">Credit Card Number</div>
  <input class="form-field" type="text" id="number" required 
    data-recurly="number" />
  <br />
  <table>
    <tr>
      <td width="80%"><div class="form-title">Expiration</div></td>
      <td width="20%"><div class="form-title">CVV</div></td>
    </tr>
    <tr>
      <td>
  <select class="form-control" id="month" data-recurly="month">
    <option value="" selected disabled>Choose --</option>
    <option>01</option>
    <option>02</option>
    <option>03</option>
    <option>04</option>
    <option>05</option>
    <option>06</option>
    <option>07</option>
    <option>08</option>
    <option>09</option>
    <option>10</option>
    <option>11</option>
    <option>12</option>
  </select>
  <select class="form-control" id="year" data-recurly="year">
    <option value="" selected disabled>Choose --</option>
    <option value="15">2015</option>
    <option value="16">2016</option>
    <option value="17">2017</option>
    <option value="18">2018</option>
    <option value="19">2019</option>
    <option value="20">2020</option>
  </select>
      </td>
      <td>
  <input class="form-field cvv" type="text" id="cvv" required 
    maxlength="4" data-recurly="cvv"  />
      </td>
    </tr>
  </table>
  <div class="form-title">Cardholder First Name</div>
  <input class="form-field" type="text" id="first-name" name="first_name" value="{{first_name}}" required 
    data-recurly="first_name" twoway="false" />
  <br />
  <div class="form-title">Cardholder Last Name</div>
  <input class="form-field" type="text" id="last-name" name="last_name" value="{{last_name}}" required
    data-recurly="last_name" twoway="false" />
  <br />
  <div class="form-title">Billing Address</div>
  <input class="form-field" type="text" id="address1" name="address1" value="{{address1}}" required 
    data-recurly="address1" twoway="false" />
  <br />
  <div class="form-title">City</div>
  <input class="form-field" type="text" id="city" name="city" value="{{city}}" required 
    data-recurly="city" twoway="false" />
  <br />
  <table>
    <tr>
      <td width="60%"><div class="form-title">State or Province</div></td>
      <td width="40%"><div class="form-title">Zip / Postal Code</div></td>
    </tr>
    <tr>
      <td>
  <select class="form-control" id="state" name="state" value="{{state}}" required data-recurly="state" twoway="false">
    <option value="" selected disabled>Choose --</option>
    <option value="AL">Alabama</option>
    <option value="AK">Alaska</option>
    <option value="AZ">Arizona</option>
    <option value="AR">Arkansas</option>
    <option value="CA">California</option>
    <option value="CO">Colorado</option>
    <option value="CT">Connecticut</option>
    <option value="DE">Delaware</option>
    <option value="DC">District Of Columbia</option>
    <option value="FL">Florida</option>
    <option value="GA">Georgia</option>
    <option value="HI">Hawaii</option>
    <option value="ID">Idaho</option>
    <option value="IL">Illinois</option>
    <option value="IN">Indiana</option>
    <option value="IA">Iowa</option>
    <option value="KS">Kansas</option>
    <option value="KY">Kentucky</option>
    <option value="LA">Louisiana</option>
    <option value="ME">Maine</option>
    <option value="MD">Maryland</option>
    <option value="MA">Massachusetts</option>
    <option value="MI">Michigan</option>
    <option value="MN">Minnesota</option>
    <option value="MS">Mississippi</option>
    <option value="MO">Missouri</option>
    <option value="MT">Montana</option>
    <option value="NE">Nebraska</option>
    <option value="NV">Nevada</option>
    <option value="NH">New Hampshire</option>
    <option value="NJ">New Jersey</option>
    <option value="NM">New Mexico</option>
    <option value="NY">New York</option>
    <option value="NC">North Carolina</option>
    <option value="ND">North Dakota</option>
    <option value="OH">Ohio</option>
    <option value="OK">Oklahoma</option>
    <option value="OR">Oregon</option>
    <option value="PA">Pennsylvania</option>
    <option value="RI">Rhode Island</option>
    <option value="SC">South Carolina</option>
    <option value="SD">South Dakota</option>
    <option value="TN">Tennessee</option>
    <option value="TX">Texas</option>
    <option value="UT">Utah</option>
    <option value="VT">Vermont</option>
    <option value="VA">Virginia</option>
    <option value="WA">Washington</option>
    <option value="WV">West Virginia</option>
    <option value="WI">Wisconsin</option>
    <option value="WY">Wyoming</option>
    <option value="AB">Alberta</option>
    <option value="BC">British Columbia</option>
    <option value="MB">Manitoba</option>
    <option value="NB">New Brunswick</option>
    <option value="NL">Newfoundland and Labrador</option>
    <option value="NS">Nova Scotia</option>
    <option value="ON">Ontario</option>
    <option value="PE">Prince Edward Island</option>
    <option value="QC">Quebec</option>
    <option value="SK">Saskatchewan</option>
    <option value="NT">Northwest Territories</option>
    <option value="NU">Nunavut</option>
    <option value="YT">Yukon</option> 
  </select>
      </td>
      <td>
  <input class="form-field" type="text" id="postal-code" name="postal_code" 
    value="{{postal_code}}" required data-recurly="postal_code" twoway="false" />
      </td>
    </tr>
  </table>
  <div class="form-title">Country</div>
  <select class="form-control" id="country" name="country" 
    value="{{ country ? country : 'US' }}" required
    data-recurly="country" twoway="false">
    <option value="" disabled>Choose --</option>
    <option value="US">United States</option>
    <option value="CA">Canada</option>
  </select>
  <br />
  <div class="signup_button">
    <button type="submit" id="submit" name="submit" style="width: 240px">Subscribe</button>
  </div>
</form>
{{/with}}
{{else}}
<p>Loading...</p>
{{/if}}
<!-- {{/step3}} -->

</script>

<!-- ractive.js view -->
<script>

var ZML_RECURLY_PUBLIC_KEY = 'sjc-tQcq5WYKgkgv9VjU77vQ1m';

var ractive = new Ractive({
  el: 'block-1',
  template: '#main-tmpl',
  magic: false,
  profileRequested: false,
  data: {
    stores: {
      auth: authStore,
      flash: flashStore 
    }
  },
  decorators: {
    subform: function( node, content ) {
      var p_form = $( '#recurly-subscribe' ).parsley();

      var pricing = recurly.Pricing();
      pricing.on( 'change', function( price_info ) {
        console.log( 'pricing change ' + price_info.next.total );
        $( '#subtotal_next' ).text( '$ ' + price_info.next.subtotal );
        $( '#discount_next' ).text( '$ ' + price_info.next.discount );
        $( '#tax_next' ).text( '$ ' + price_info.next.tax );
        $( '#total_next' ).text( '$ ' + price_info.next.total );
      });
      pricing.attach( node );

      return {
        teardown: function () { }
      };
    }
  },
  oninit: function() {
    recurly.configure( ZML_RECURLY_PUBLIC_KEY );

    var _ractive = this;
    setupRactiveStores( _ractive );
    AuthActions.loadAuthToken();
    FlashActions.showFlash();
  },
  onchange: function() {
    if ( !this.profileRequested ) {
      var token = this.get( 'stores.auth.store.user_data.token.value' );
      if ( token ) {
        this.profileRequested = true;
        AuthActions.getAccountProfile( token, null ); // '/index.html'
      }
    }
  }
});

ractive.on( 'recurlySubmit', function( event ) {
  var e = event.original;
  if ( e ) { e.preventDefault; e.stopPropagation; }
  var p_form = $( '#recurly-subscribe' ).parsley();
  if ( p_form.isValid() ) {
    var token = this.get( 'stores.auth.store.user_data.token.value' );
    var form = document.querySelector( '#recurly-subscribe' );
    recurly.token( form, function( err, billingInfoToken ) {
      if ( err ) {
        // handle error using err.code and err.fields
        // highlight fields with a border
        console.log( 'recurly token error ' + err.message );
        $.each( err.fields, function(i, field) {
          var p_field = $( "input[name='" + field + "']" ).parsley();
          window.ParsleyUI.removeError(p_field, 'validation-error' );
          window.ParsleyUI.addError(p_field, 'validation-error', err.message );
        });
      } else if ( token ) {
        // recurly.js has filled in the 'token' field, so now we can submit the
        // form to your server; alternatively, you can access token.id and do
        // any processing you wish
        // The billingInfoToken object has an id property, like "eb2KbWH7-sKyVIGU2HxXYg"
        var data = serializeFormJSON( '#recurly-subscribe' );
        RecurlyActions.placeSubscriptionOrder( token, data, null );
      } else {
        // Yikes!
      }
    });
  }
  return false;
});

</script>

<script src="js/jquery.modal.js"></script>
<script src="js/site.js"></script>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-54262092-1', 'auto');
  ga('send', 'pageview');

</script>
</body>
</html>
